stages: [build, deploy]

build:docs:
  image: python:3.12
  stage: build
  before_script:
    - pip install -r requirements-docs.txt
  script:
    - mkdocs build --strict --site-dir public
  artifacts:
    paths: [public]
  only:
    - main
    - master

pages:
  stage: deploy
  dependencies: [build:docs]
  script: []
  artifacts:
    paths: [public]
  only:
    - main
    - master
